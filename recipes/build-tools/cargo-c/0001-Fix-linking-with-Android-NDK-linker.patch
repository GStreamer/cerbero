From 305ea8afe4ba7b7c610ccb49e8d299b25d40ea75 Mon Sep 17 00:00:00 2001
From: Nirbheek Chauhan <nirbheek@centricular.com>
Date: Thu, 1 Sep 2022 21:33:29 +0530
Subject: [PATCH] Fix linking with Android NDK linker

Android ld.gold cannot handle -Wl, and it's incorrect anyway since all
the other linker arguments passed by cargo do not have a -Wl prefix.
---
 src/target.rs | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/target.rs b/src/target.rs
index 136cf54..8c560d1 100644
--- a/src/target.rs
+++ b/src/target.rs
@@ -73,7 +73,7 @@ impl Target {
         let sover = version.main_version();
 
         if os == "android" {
-            lines.push(format!("-Wl,-soname,lib{lib_name}.so"));
+            lines.push(format!("-soname,lib{lib_name}.so"));
         } else if os == "linux"
             || os == "freebsd"
             || os == "dragonfly"
-- 
2.41.0

