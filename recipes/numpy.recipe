# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python


class Recipe(recipe.Recipe):
    name = 'numpy'
    version = '1.8.1'
    stype = SourceType.TARBALL
    url = 'http://downloads.sourceforge.net/project/numpy/NumPy/%(version)s/numpy-%(version)s.tar.gz'
    licenses = [License.BSD]
    deps = []

    btype = BuildType.CUSTOM
    files_python = [
         'site-packages/numpy/version.py', 'site-packages/numpy/__config__.py',
         'site-packages/numpy/dual.py', 'site-packages/numpy/setup.py',
         'site-packages/numpy/__init__.py', 'site-packages/numpy/_import_tools.py',
         'site-packages/numpy/ctypeslib.py', 'site-packages/numpy/matlib.py',
         'site-packages/numpy/add_newdocs.py',
         'site-packages/numpy/distutils/__config__.py',
         'site-packages/numpy/distutils/line_endings.py',
         'site-packages/numpy/distutils/misc_util.py',
         'site-packages/numpy/distutils/extension.py',
         'site-packages/numpy/distutils/compat.py',
         'site-packages/numpy/distutils/setup.py',
         'site-packages/numpy/distutils/log.py',
         'site-packages/numpy/distutils/system_info.py',
         'site-packages/numpy/distutils/from_template.py',
         'site-packages/numpy/distutils/npy_pkg_config.py',
         'site-packages/numpy/distutils/pathccompiler.py',
         'site-packages/numpy/distutils/exec_command.py',
         'site-packages/numpy/distutils/lib2def.py',
         'site-packages/numpy/distutils/unixccompiler.py',
         'site-packages/numpy/distutils/__init__.py',
         'site-packages/numpy/distutils/cpuinfo.py',
         'site-packages/numpy/distutils/__version__.py',
         'site-packages/numpy/distutils/intelccompiler.py',
         'site-packages/numpy/distutils/numpy_distribution.py',
         'site-packages/numpy/distutils/ccompiler.py',
         'site-packages/numpy/distutils/core.py',
         'site-packages/numpy/distutils/mingw32ccompiler.py',
         'site-packages/numpy/distutils/conv_template.py',
         'site-packages/numpy/distutils/info.py',
         'site-packages/numpy/distutils/environment.py',
         'site-packages/numpy/distutils/mingw/gfortran_vs2003_hack.c',
         'site-packages/numpy/distutils/command/config.py',
         'site-packages/numpy/distutils/command/install.py',
         'site-packages/numpy/distutils/command/install_data.py',
         'site-packages/numpy/distutils/command/sdist.py',
         'site-packages/numpy/distutils/command/build_ext.py',
         'site-packages/numpy/distutils/command/autodist.py',
         'site-packages/numpy/distutils/command/build_src.py',
         'site-packages/numpy/distutils/command/__init__.py',
         'site-packages/numpy/distutils/command/bdist_rpm.py',
         'site-packages/numpy/distutils/command/install_headers.py',
         'site-packages/numpy/distutils/command/config_compiler.py',
         'site-packages/numpy/distutils/command/build_clib.py',
         'site-packages/numpy/distutils/command/build_scripts.py',
         'site-packages/numpy/distutils/command/egg_info.py',
         'site-packages/numpy/distutils/command/install_clib.py',
         'site-packages/numpy/distutils/command/develop.py',
         'site-packages/numpy/distutils/command/build_py.py',
         'site-packages/numpy/distutils/command/build.py',
         'site-packages/numpy/distutils/fcompiler/hpux.py',
         'site-packages/numpy/distutils/fcompiler/lahey.py',
         'site-packages/numpy/distutils/fcompiler/gnu.py',
         'site-packages/numpy/distutils/fcompiler/ibm.py',
         'site-packages/numpy/distutils/fcompiler/pathf95.py',
         'site-packages/numpy/distutils/fcompiler/none.py',
         'site-packages/numpy/distutils/fcompiler/pg.py',
         'site-packages/numpy/distutils/fcompiler/compaq.py',
         'site-packages/numpy/distutils/fcompiler/mips.py',
         'site-packages/numpy/distutils/fcompiler/intel.py',
         'site-packages/numpy/distutils/fcompiler/__init__.py',
         'site-packages/numpy/distutils/fcompiler/g95.py',
         'site-packages/numpy/distutils/fcompiler/absoft.py',
         'site-packages/numpy/distutils/fcompiler/vast.py',
         'site-packages/numpy/distutils/fcompiler/nag.py',
         'site-packages/numpy/distutils/fcompiler/sun.py',
         'site-packages/numpy/f2py/f2py.1',
         'site-packages/numpy/f2py/f90mod_rules.py',
         'site-packages/numpy/f2py/use_rules.py',
         'site-packages/numpy/f2py/setup.py', 'site-packages/numpy/f2py/cfuncs.py',
         'site-packages/numpy/f2py/auxfuncs.py',
         'site-packages/numpy/f2py/func2subr.py',
         'site-packages/numpy/f2py/rules.py', 'site-packages/numpy/f2py/f2py2e.py',
         'site-packages/numpy/f2py/__init__.py',
         'site-packages/numpy/f2py/__version__.py',
         'site-packages/numpy/f2py/capi_maps.py',
         'site-packages/numpy/f2py/f2py_testing.py',
         'site-packages/numpy/f2py/info.py', 'site-packages/numpy/f2py/diagnose.py',
         'site-packages/numpy/f2py/common_rules.py',
         'site-packages/numpy/f2py/cb_rules.py',
         'site-packages/numpy/f2py/crackfortran.py',
         'site-packages/numpy/f2py/src/fortranobject.c',
         'site-packages/numpy/f2py/src/fortranobject.h',
         'site-packages/numpy/f2py/docs/FAQ.txt',
         'site-packages/numpy/f2py/docs/docutils.conf',
         'site-packages/numpy/f2py/docs/HISTORY.txt',
         'site-packages/numpy/f2py/docs/THANKS.txt',
         'site-packages/numpy/f2py/docs/README.txt',
         'site-packages/numpy/f2py/docs/pyforttest.pyf',
         'site-packages/numpy/f2py/docs/hello.f',
         'site-packages/numpy/f2py/docs/simple.f',
         'site-packages/numpy/f2py/docs/simple_session.dat',
         'site-packages/numpy/f2py/docs/default.css',
         'site-packages/numpy/f2py/docs/TESTING.txt',
         'site-packages/numpy/f2py/docs/OLDNEWS.txt',
         'site-packages/numpy/f2py/docs/pytest.py',
         'site-packages/numpy/f2py/docs/usersguide/allocarr.f90',
         'site-packages/numpy/f2py/docs/usersguide/callback.f',
         'site-packages/numpy/f2py/docs/usersguide/allocarr_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/common.f',
         'site-packages/numpy/f2py/docs/usersguide/extcallback.f',
         'site-packages/numpy/f2py/docs/usersguide/default.css',
         'site-packages/numpy/f2py/docs/usersguide/fib3.f',
         'site-packages/numpy/f2py/docs/usersguide/calculate.f',
         'site-packages/numpy/f2py/docs/usersguide/docutils.conf',
         'site-packages/numpy/f2py/docs/usersguide/compile_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/fib1.f',
         'site-packages/numpy/f2py/docs/usersguide/callback2.pyf',
         'site-packages/numpy/f2py/docs/usersguide/moddata.f90',
         'site-packages/numpy/f2py/docs/usersguide/spam_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/ftype.f',
         'site-packages/numpy/f2py/docs/usersguide/array_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/var.pyf',
         'site-packages/numpy/f2py/docs/usersguide/string_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/var_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/fib1.pyf',
         'site-packages/numpy/f2py/docs/usersguide/run_main_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/moddata_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/callback_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/ftype_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/string.f',
         'site-packages/numpy/f2py/docs/usersguide/fib2.pyf',
         'site-packages/numpy/f2py/docs/usersguide/extcallback_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/scalar_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/common_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/scalar.f',
         'site-packages/numpy/f2py/docs/usersguide/index.txt',
         'site-packages/numpy/f2py/docs/usersguide/calculate_session.dat',
         'site-packages/numpy/f2py/docs/usersguide/setup_example.py',
         'site-packages/numpy/f2py/docs/usersguide/array.f',
         'site-packages/numpy/f2py/docs/usersguide/spam.pyf',
         'site-packages/numpy/core/_dummy.so',
         'site-packages/numpy/core/multiarray.so',
         'site-packages/numpy/core/umath.so',
         'site-packages/numpy/core/scalarmath.so',
         'site-packages/numpy/core/umath_tests.so',
         'site-packages/numpy/core/struct_ufunc_test.so',
         'site-packages/numpy/core/multiarray_tests.so',
         'site-packages/numpy/core/operand_flag_tests.so',
         'site-packages/numpy/core/function_base.py',
         'site-packages/numpy/core/arrayprint.py',
         'site-packages/numpy/core/getlimits.py',
         'site-packages/numpy/core/fromnumeric.py',
         'site-packages/numpy/core/numeric.py', 'site-packages/numpy/core/setup.py',
         'site-packages/numpy/core/memmap.py',
         'site-packages/numpy/core/_internal.py',
         'site-packages/numpy/core/defchararray.py',
         'site-packages/numpy/core/records.py',
         'site-packages/numpy/core/__init__.py',
         'site-packages/numpy/core/setup_common.py',
         'site-packages/numpy/core/numerictypes.py',
         'site-packages/numpy/core/machar.py',
         'site-packages/numpy/core/shape_base.py',
         'site-packages/numpy/core/_methods.py', 'site-packages/numpy/core/info.py',
         'site-packages/numpy/core/generate_numpy_api.py',
         'site-packages/numpy/core/lib/libnpymath.a',
         'site-packages/numpy/core/lib/npy-pkg-config/mlib.ini',
         'site-packages/numpy/core/lib/npy-pkg-config/npymath.ini',
         'site-packages/numpy/core/include/numpy/ufunc_api.txt',
         'site-packages/numpy/core/include/numpy/__ufunc_api.h',
         'site-packages/numpy/core/include/numpy/multiarray_api.txt',
         'site-packages/numpy/core/include/numpy/__multiarray_api.h',
         'site-packages/numpy/core/include/numpy/_numpyconfig.h',
         'site-packages/numpy/core/include/numpy/oldnumeric.h',
         'site-packages/numpy/core/include/numpy/ndarraytypes.h',
         'site-packages/numpy/core/include/numpy/utils.h',
         'site-packages/numpy/core/include/numpy/_neighborhood_iterator_imp.h',
         'site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h',
         'site-packages/numpy/core/include/numpy/npy_no_deprecated_api.h',
         'site-packages/numpy/core/include/numpy/npy_cpu.h',
         'site-packages/numpy/core/include/numpy/numpyconfig.h',
         'site-packages/numpy/core/include/numpy/arrayscalars.h',
         'site-packages/numpy/core/include/numpy/ndarrayobject.h',
         'site-packages/numpy/core/include/numpy/npy_3kcompat.h',
         'site-packages/numpy/core/include/numpy/arrayobject.h',
         'site-packages/numpy/core/include/numpy/noprefix.h',
         'site-packages/numpy/core/include/numpy/npy_math.h',
         'site-packages/numpy/core/include/numpy/npy_common.h',
         'site-packages/numpy/core/include/numpy/npy_os.h',
         'site-packages/numpy/core/include/numpy/ufuncobject.h',
         'site-packages/numpy/core/include/numpy/halffloat.h',
         'site-packages/numpy/core/include/numpy/old_defines.h',
         'site-packages/numpy/core/include/numpy/npy_endian.h',
         'site-packages/numpy/core/include/numpy/npy_interrupt.h',
         'site-packages/numpy/lib/_compiled_base.so',
         'site-packages/numpy/lib/function_base.py',
         'site-packages/numpy/lib/utils.py',
         'site-packages/numpy/lib/user_array.py',
         'site-packages/numpy/lib/twodim_base.py',
         'site-packages/numpy/lib/polynomial.py',
         'site-packages/numpy/lib/financial.py',
         'site-packages/numpy/lib/nanfunctions.py',
         'site-packages/numpy/lib/setup.py',
         'site-packages/numpy/lib/recfunctions.py',
         'site-packages/numpy/lib/arrayterator.py',
         'site-packages/numpy/lib/ufunclike.py',
         'site-packages/numpy/lib/arraysetops.py',
         'site-packages/numpy/lib/_datasource.py',
         'site-packages/numpy/lib/__init__.py',
         'site-packages/numpy/lib/_iotools.py', 'site-packages/numpy/lib/npyio.py',
         'site-packages/numpy/lib/arraypad.py',
         'site-packages/numpy/lib/stride_tricks.py',
         'site-packages/numpy/lib/shape_base.py',
         'site-packages/numpy/lib/format.py',
         'site-packages/numpy/lib/index_tricks.py',
         'site-packages/numpy/lib/info.py', 'site-packages/numpy/lib/type_check.py',
         'site-packages/numpy/lib/scimath.py',
         'site-packages/numpy/oldnumeric/fft.py',
         'site-packages/numpy/oldnumeric/user_array.py',
         'site-packages/numpy/oldnumeric/random_array.py',
         'site-packages/numpy/oldnumeric/array_printer.py',
         'site-packages/numpy/oldnumeric/compat.py',
         'site-packages/numpy/oldnumeric/alter_code1.py',
         'site-packages/numpy/oldnumeric/rng.py',
         'site-packages/numpy/oldnumeric/functions.py',
         'site-packages/numpy/oldnumeric/setup.py',
         'site-packages/numpy/oldnumeric/linear_algebra.py',
         'site-packages/numpy/oldnumeric/misc.py',
         'site-packages/numpy/oldnumeric/mlab.py',
         'site-packages/numpy/oldnumeric/precision.py',
         'site-packages/numpy/oldnumeric/fix_default_axis.py',
         'site-packages/numpy/oldnumeric/alter_code2.py',
         'site-packages/numpy/oldnumeric/typeconv.py',
         'site-packages/numpy/oldnumeric/rng_stats.py',
         'site-packages/numpy/oldnumeric/__init__.py',
         'site-packages/numpy/oldnumeric/matrix.py',
         'site-packages/numpy/oldnumeric/arrayfns.py',
         'site-packages/numpy/oldnumeric/ma.py',
         'site-packages/numpy/oldnumeric/ufuncs.py',
         'site-packages/numpy/numarray/_capi.so',
         'site-packages/numpy/numarray/fft.py',
         'site-packages/numpy/numarray/random_array.py',
         'site-packages/numpy/numarray/session.py',
         'site-packages/numpy/numarray/compat.py',
         'site-packages/numpy/numarray/alter_code1.py',
         'site-packages/numpy/numarray/functions.py',
         'site-packages/numpy/numarray/setup.py',
         'site-packages/numpy/numarray/linear_algebra.py',
         'site-packages/numpy/numarray/mlab.py',
         'site-packages/numpy/numarray/image.py',
         'site-packages/numpy/numarray/alter_code2.py',
         'site-packages/numpy/numarray/__init__.py',
         'site-packages/numpy/numarray/matrix.py',
         'site-packages/numpy/numarray/numerictypes.py',
         'site-packages/numpy/numarray/util.py',
         'site-packages/numpy/numarray/ma.py',
         'site-packages/numpy/numarray/nd_image.py',
         'site-packages/numpy/numarray/convolve.py',
         'site-packages/numpy/numarray/ufuncs.py',
         'site-packages/numpy/numarray/include/numpy/nummacro.h',
         'site-packages/numpy/numarray/include/numpy/ieeespecial.h',
         'site-packages/numpy/numarray/include/numpy/libnumarray.h',
         'site-packages/numpy/numarray/include/numpy/cfunc.h',
         'site-packages/numpy/numarray/include/numpy/arraybase.h',
         'site-packages/numpy/numarray/include/numpy/numcomplex.h',
         'site-packages/numpy/fft/fftpack_lite.so',
         'site-packages/numpy/fft/setup.py', 'site-packages/numpy/fft/__init__.py',
         'site-packages/numpy/fft/info.py', 'site-packages/numpy/fft/fftpack.py',
         'site-packages/numpy/fft/helper.py',
         'site-packages/numpy/linalg/lapack_lite.so',
         'site-packages/numpy/linalg/_umath_linalg.so',
         'site-packages/numpy/linalg/setup.py',
         'site-packages/numpy/linalg/__init__.py',
         'site-packages/numpy/linalg/linalg.py',
         'site-packages/numpy/linalg/info.py',
         'site-packages/numpy/random/mtrand.so',
         'site-packages/numpy/random/randomkit.h',
         'site-packages/numpy/random/setup.py',
         'site-packages/numpy/random/__init__.py',
         'site-packages/numpy/random/info.py', 'site-packages/numpy/ma/mrecords.py',
         'site-packages/numpy/ma/setup.py', 'site-packages/numpy/ma/version.py',
         'site-packages/numpy/ma/timer_comparison.py',
         'site-packages/numpy/ma/__init__.py', 'site-packages/numpy/ma/bench.py',
         'site-packages/numpy/ma/core.py', 'site-packages/numpy/ma/extras.py',
         'site-packages/numpy/matrixlib/setup.py',
         'site-packages/numpy/matrixlib/__init__.py',
         'site-packages/numpy/matrixlib/defmatrix.py',
         'site-packages/numpy/compat/setup.py',
         'site-packages/numpy/compat/_inspect.py',
         'site-packages/numpy/compat/__init__.py',
         'site-packages/numpy/compat/py3k.py',
         'site-packages/numpy/polynomial/hermite.py',
         'site-packages/numpy/polynomial/polynomial.py',
         'site-packages/numpy/polynomial/polyutils.py',
         'site-packages/numpy/polynomial/chebyshev.py',
         'site-packages/numpy/polynomial/setup.py',
         'site-packages/numpy/polynomial/polytemplate.py',
         'site-packages/numpy/polynomial/laguerre.py',
         'site-packages/numpy/polynomial/hermite_e.py',
         'site-packages/numpy/polynomial/__init__.py',
         'site-packages/numpy/polynomial/legendre.py',
         'site-packages/numpy/doc/io.py', 'site-packages/numpy/doc/jargon.py',
         'site-packages/numpy/doc/glossary.py', 'site-packages/numpy/doc/basics.py',
         'site-packages/numpy/doc/misc.py',
         'site-packages/numpy/doc/structured_arrays.py',
         'site-packages/numpy/doc/byteswapping.py',
         'site-packages/numpy/doc/performance.py',
         'site-packages/numpy/doc/indexing.py',
         'site-packages/numpy/doc/methods_vs_functions.py',
         'site-packages/numpy/doc/constants.py',
         'site-packages/numpy/doc/__init__.py',
         'site-packages/numpy/doc/subclassing.py',
         'site-packages/numpy/doc/creation.py',
         'site-packages/numpy/doc/broadcasting.py',
         'site-packages/numpy/doc/howtofind.py',
         'site-packages/numpy/doc/internals.py',
         'site-packages/numpy/doc/ufuncs.py',
         'site-packages/numpy/testing/decorators.py',
         'site-packages/numpy/testing/__init__.py',
         'site-packages/numpy/testing/noseclasses.py',
         'site-packages/numpy/testing/nosetester.py',
         'site-packages/numpy/testing/numpytest.py',
         'site-packages/numpy/testing/print_coercion_tables.py',
         'site-packages/numpy/testing/setup.py',
         'site-packages/numpy/testing/utils.py'
    ]

    files_bins = [
         'f2py',
    ]


    def install(self):
        flags = ""
        if self.config.target_platform == Platform.DARWIN:
            # numpy / setup.py seems to try to build a universal binary but fails.
            # Force it to a single arch for now.
            if self.config.target_arch == Architecture.X86:
                flags = 'ARCHFLAGS="-arch i386" '
            elif self.config.target_arch == Architecture.X86_64:
                flags = 'ARCHFLAGS="-arch x86_64" '
        shell.call(flags + 'python setup.py install --prefix=%s --install-lib=%s' %
                (self.config.prefix, os.path.join(self.config.prefix,
                 self.config.py_prefix, "site-packages")), self.build_dir)
