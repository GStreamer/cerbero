From b25bc29528656ac22f1565e48d58b260f717f6ee Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C5=BDan=20Dober=C5=A1ek?= <zdobersek@igalia.com>
Date: Thu, 25 Feb 2021 18:38:49 +0100
Subject: [PATCH] Temporarily ignore IPC connection error

---
 Source/WebKit/Platform/IPC/unix/ConnectionUnix.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/Source/WebKit/Platform/IPC/unix/ConnectionUnix.cpp b/Source/WebKit/Platform/IPC/unix/ConnectionUnix.cpp
index 3d544021..9ab40ab0 100644
--- a/Source/WebKit/Platform/IPC/unix/ConnectionUnix.cpp
+++ b/Source/WebKit/Platform/IPC/unix/ConnectionUnix.cpp
@@ -358,6 +358,10 @@ bool Connection::open()
     m_isConnected = true;
 #if USE(GLIB)
     m_readSocketMonitor.start(m_socket.get(), G_IO_IN, m_connectionQueue->runLoop(), [protectedThis] (GIOCondition condition) -> gboolean {
+        if ((condition & G_IO_HUP) && errno == EAGAIN) {
+            ALOGV("Connection::open(): ERR but EAGAIN\n");
+            return G_SOURCE_CONTINUE;
+        }
         if (condition & G_IO_HUP || condition & G_IO_ERR || condition & G_IO_NVAL) {
             protectedThis->connectionDidClose();
             return G_SOURCE_REMOVE;
-- 
2.25.1

