 # -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python
import sys

class Recipe(recipe.Recipe):
    name = 'graphene'
    remotes = {'origin': 'https://github.com/ebassi/graphene.git'}
    commit = '514dad96175d4e42a9758b13c30658578c3dd535'
    version = '1.2.1'
    licenses = [License.MIT]
    configure_options = ' --enable-static --enable-shared'
    deps = ['glib']

    config_sh = 'sh ./autogen.sh'

    files_libs = ['libgraphene-1.0']
    files_typelibs = ['Graphene-1.0']

    files_devel = [
        'include/graphene-1.0',
        'lib/pkgconfig/graphene-1.0.pc',
        'lib/pkgconfig/graphene-gobject-1.0.pc',
    ]

    def prepare(self):
        if self.config.variants.gi:
            # graphene needs gi 1.41.0+
            # self.deps.append("gobject-introspection")
            self.config.variants.gi = False
